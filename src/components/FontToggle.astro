---

---

<button id="font-toggle" class="font-toggle-btn" aria-label="Toggle Font">
    <span class="mono-label">Mono</span>
    <span class="toggle-slider"></span>
    <span class="sans-label">Sans</span>
</button>

<script>
    const STORAGE_KEY = "til-font-preference";
    const MONO_CLASS = "use-mono-font";
    const button = document.getElementById("font-toggle");
    const target = document.documentElement;

    // Initialize button state
    const preference = localStorage.getItem(STORAGE_KEY);
    const isTilSection = window.location.pathname.includes("/til/");
    const shouldBeMono = preference === "mono" || (!preference && isTilSection);

    if (shouldBeMono) {
        button?.classList.add("is-mono");
    }

    button?.addEventListener("click", () => {
        const isMono = target.classList.toggle(MONO_CLASS);
        button.classList.toggle("is-mono", isMono);
        localStorage.setItem(STORAGE_KEY, isMono ? "mono" : "sans");
    });
</script>

<style>
    .font-toggle-btn {
        display: inline-flex;
        align-items: center;
        background: var(--color-border);
        border: none;
        border-radius: 20px;
        padding: 2px;
        cursor: pointer;
        position: relative;
        width: 100px;
        height: 28px;
        font-family: var(--font-header);
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        overflow: hidden;
    }

    .mono-label,
    .sans-label {
        flex: 1;
        text-align: center;
        z-index: 1;
        transition: color 0.3s;
        color: var(--color-text-light);
    }

    .toggle-slider {
        position: absolute;
        width: calc(50% - 2px);
        height: calc(100% - 4px);
        background: var(--color-surface);
        border-radius: 18px;
        left: 2px;
        transition: transform 0.3s ease;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    /* Sans state (default) - slider is on the right */
    .toggle-slider {
        transform: translateX(100%);
    }
    .sans-label {
        color: var(--color-text);
    }

    /* Mono state - slider is on the left */
    .is-mono .toggle-slider {
        transform: translateX(0);
    }
    .is-mono .mono-label {
        color: var(--color-text);
    }
    .is-mono .sans-label {
        color: var(--color-text-light);
    }

    .font-toggle-btn:hover {
        background: #ddd;
    }
</style>
